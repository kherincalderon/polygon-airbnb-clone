{"ast":null,"code":"import _asyncToGenerator from\"/Users/kherincalderon/Moralis/airbnb-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kherincalderon/Moralis/airbnb-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/kherincalderon/Moralis/airbnb-clone/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import\"./Rentals.css\";import{Link}from\"react-router-dom\";import{useLocation}from\"react-router\";import logo from\"../images/airbnbRed.png\";import{ConnectButton,Icon,Button,useNotification}from\"web3uikit\";import RentalsMap from\"../components/RentalsMap\";import{useMoralis,useWeb3ExecuteFunction}from\"react-moralis\";import User from\"../components/User\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Rentals=function Rentals(){var _useLocation=useLocation(),searchFilters=_useLocation.state;var _useState=useState(),_useState2=_slicedToArray(_useState,2),highLight=_useState2[0],setHighLight=_useState2[1];var _useMoralis=useMoralis(),Moralis=_useMoralis.Moralis,account=_useMoralis.account;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),rentalsList=_useState4[0],setRentalsList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),coOrdinates=_useState6[0],setCoOrdinates=_useState6[1];var contractProcessor=useWeb3ExecuteFunction();var dispatch=useNotification();var handleSuccess=function handleSuccess(){dispatch({type:\"success\",message:\"Nice! You are going to \".concat(searchFilters.destination,\"!!\"),title:\"Booking Succesful\",position:\"topL\"});};var handleError=function handleError(msg){dispatch({type:\"error\",message:\"\".concat(msg),title:\"Booking Failed\",position:\"topL\"});};var handleNoAccount=function handleNoAccount(){dispatch({type:\"error\",message:\"You need to connect your wallet to book a rental\",title:\"Not Connected\",position:\"topL\"});};useEffect(function(){function fetchRentalsList(){return _fetchRentalsList.apply(this,arguments);}function _fetchRentalsList(){_fetchRentalsList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var Rentals,query,result,cords;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Rentals=Moralis.Object.extend(\"Rentals\");query=new Moralis.Query(Rentals);query.equalTo(\"city\",searchFilters.destination);query.greaterThanOrEqualTo(\"maxGuests_decimal\",searchFilters.guests);_context.next=6;return query.find();case 6:result=_context.sent;cords=[];result.forEach(function(e){cords.push({lat:e.attributes.lat,lng:e.attributes.long});});setCoOrdinates(cords);setRentalsList(result);case 11:case\"end\":return _context.stop();}}},_callee);}));return _fetchRentalsList.apply(this,arguments);}fetchRentalsList();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[searchFilters]);var bookRental=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(start,end,id,dayPrice){var arr,dt,options;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:for(arr=[],dt=new Date(start);dt<=end;dt.setDate(dt.getDate()+1)){arr.push(new Date(dt).toISOString().slice(0,10));// yyyy-mm-dd\n}options={contractAddress:\"0x35B9986978b9C93dEef1C5Bbb6d829f7CD3f0566\",functionName:\"addDatesBooked\",abi:[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"string[]\",\"name\":\"newBookings\",\"type\":\"string[]\"}],\"name\":\"addDatesBooked\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"}],params:{id:id,newBookings:arr},msgValue:Moralis.Units.ETH(dayPrice*arr.length)};console.log(arr);_context2.next=5;return contractProcessor.fetch({params:options,onSuccess:function onSuccess(){handleSuccess();},onError:function onError(error){handleError(error.data.message);}});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function bookRental(_x,_x2,_x3,_x4){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topBanner\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:logo,alt:\"logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchReminder\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter\",children:searchFilters.destination}),/*#__PURE__*/_jsx(\"div\",{className:\"vl\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter\",children:\"\\n           \".concat(searchFilters.checkIn.toLocaleString(\"default\",{month:\"short\"}),\" \\n           \").concat(searchFilters.checkIn.toLocaleString(\"default\",{day:\"2-digit\"}),\" \\n           - \\n           \").concat(searchFilters.checkOut.toLocaleString(\"default\",{month:\"short\"}),\" \\n           \").concat(searchFilters.checkOut.toLocaleString(\"default\",{day:\"2-digit\"}),\"\\n          \")}),/*#__PURE__*/_jsx(\"div\",{className:\"vl\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter\",children:[searchFilters.guests,\" Guest\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"searchFiltersIcon\",children:/*#__PURE__*/_jsx(Icon,{fill:\"#ffffff\",size:20,svg:\"search\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lrContainers\",children:[account&&/*#__PURE__*/_jsx(User,{account:account}),/*#__PURE__*/_jsx(ConnectButton,{})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"line\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rentalsContent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rentalsContentL\",children:[\"300+ stays in \",searchFilters.destination,rentalsList&&rentalsList.map(function(e,i){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{className:\"line2\"}),/*#__PURE__*/_jsxs(\"div\",{className:highLight===i?\"rentalDivH \":\"rentalDiv\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"rentalImg\",src:e.attributes.imgUrl,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rentalInfo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rentalTitle\",children:e.attributes.name}),/*#__PURE__*/_jsx(\"div\",{className:\"rentalDesc\",children:e.attributes.unoDescription}),/*#__PURE__*/_jsx(\"div\",{className:\"rentalDesc\",children:e.attributes.dosDescription}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottomButton\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){if(account){bookRental(searchFilters.checkIn,searchFilters.checkOut,e.attributes.uid_decimal.value.$numberDecimal,Number(e.attributes.pricePerDay_decimal.value.$numberDecimal));}else{handleNoAccount();}},text:\"Stay Here\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[/*#__PURE__*/_jsx(Icon,{fill:\"#6e29e1\",size:14,svg:\"matic\"}),\" \",e.attributes.pricePerDay,\" / Day\"]})]})]})]})]});})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rentalsContentR\",children:/*#__PURE__*/_jsx(RentalsMap,{locations:coOrdinates,setHighLight:setHighLight})})]})]});};export default Rentals;","map":{"version":3,"sources":["/Users/kherincalderon/Moralis/airbnb-clone/src/pages/Rentals.js"],"names":["React","useState","useEffect","Link","useLocation","logo","ConnectButton","Icon","Button","useNotification","RentalsMap","useMoralis","useWeb3ExecuteFunction","User","Rentals","searchFilters","state","highLight","setHighLight","Moralis","account","rentalsList","setRentalsList","coOrdinates","setCoOrdinates","contractProcessor","dispatch","handleSuccess","type","message","destination","title","position","handleError","msg","handleNoAccount","fetchRentalsList","Object","extend","query","Query","equalTo","greaterThanOrEqualTo","guests","find","result","cords","forEach","e","push","lat","attributes","lng","long","bookRental","start","end","id","dayPrice","arr","dt","Date","setDate","getDate","toISOString","slice","options","contractAddress","functionName","abi","params","newBookings","msgValue","Units","ETH","length","console","log","fetch","onSuccess","onError","error","data","checkIn","toLocaleString","month","day","checkOut","map","i","imgUrl","name","unoDescription","dosDescription","uid_decimal","value","$numberDecimal","Number","pricePerDay_decimal","pricePerDay"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./Rentals.css\";\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router\";\nimport logo from \"../images/airbnbRed.png\"\nimport { ConnectButton, Icon, Button, useNotification } from \"web3uikit\";\nimport RentalsMap from \"../components/RentalsMap\";\nimport { useMoralis, useWeb3ExecuteFunction } from \"react-moralis\";\nimport User from \"../components/User\";\n\nconst Rentals = () => {\n\n  const { state: searchFilters } = useLocation();\n  const [highLight, setHighLight] = useState();\n  const { Moralis, account } = useMoralis();\n  const [rentalsList, setRentalsList] = useState();\n  const [coOrdinates, setCoOrdinates] = useState([]);\n  const contractProcessor = useWeb3ExecuteFunction();\n  const dispatch = useNotification();\n\n  const handleSuccess= () => {\n    dispatch({\n      type: \"success\",\n      message: `Nice! You are going to ${searchFilters.destination}!!`,\n      title: \"Booking Succesful\",\n      position: \"topL\",\n    });\n  };\n\n  const handleError= (msg) => {\n    dispatch({\n      type: \"error\",\n      message: `${msg}`,\n      title: \"Booking Failed\",\n      position: \"topL\",\n    });\n  };\n\n  const handleNoAccount= () => {\n    dispatch({\n      type: \"error\",\n      message: `You need to connect your wallet to book a rental`,\n      title: \"Not Connected\",\n      position: \"topL\",\n    });\n  };\n\n  useEffect(() => {\n    async function fetchRentalsList() {\n      const Rentals = Moralis.Object.extend(\"Rentals\");\n      const query = new Moralis.Query(Rentals);\n      query.equalTo(\"city\", searchFilters.destination);\n      query.greaterThanOrEqualTo(\"maxGuests_decimal\", searchFilters.guests);\n\n      const result = await query.find();\n\n      let cords = [];\n      result.forEach((e) => {\n        cords.push({ lat: e.attributes.lat, lng: e.attributes.long });\n      });\n\n      setCoOrdinates(cords);\n      setRentalsList(result);\n    }\n\n    fetchRentalsList();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchFilters]);\n\n  const bookRental = async function (start, end, id, dayPrice) {\n    \n    for (\n      var arr = [], dt = new Date(start);\n      dt <= end;\n      dt.setDate(dt.getDate() + 1)\n    ) {\n      arr.push(new Date(dt).toISOString().slice(0, 10)); // yyyy-mm-dd\n    }\n\n    let options = {\n      contractAddress: \"0x35B9986978b9C93dEef1C5Bbb6d829f7CD3f0566\",\n      functionName: \"addDatesBooked\",\n      abi: [\n        {\n          \"inputs\": [\n            {\n              \"internalType\": \"uint256\",\n              \"name\": \"id\",\n              \"type\": \"uint256\"\n            },\n            {\n              \"internalType\": \"string[]\",\n              \"name\": \"newBookings\",\n              \"type\": \"string[]\"\n            }\n          ],\n          \"name\": \"addDatesBooked\",\n          \"outputs\": [],\n          \"stateMutability\": \"payable\",\n          \"type\": \"function\"\n        }\n      ],\n      params: {\n        id: id,\n        newBookings: arr,\n      },\n      msgValue: Moralis.Units.ETH(dayPrice * arr.length),\n    }\n    console.log(arr);\n\n    await contractProcessor.fetch({\n      params: options,\n      onSuccess: () => {\n        handleSuccess();\n      },\n      onError: (error) => {\n        handleError(error.data.message)\n      }\n    });\n\n  }\n\n\n  return (\n    <>\n      <div className=\"topBanner\">\n        <div>\n          <Link to=\"/\">\n            <img className=\"logo\" src={logo} alt=\"logo\"></img>\n          </Link>\n        </div>\n        <div className=\"searchReminder\">\n          <div className=\"filter\">{searchFilters.destination}</div>\n          <div className=\"vl\" />\n          <div className=\"filter\">\n            {`\n           ${searchFilters.checkIn.toLocaleString(\"default\", {\n             month: \"short\",\n           })} \n           ${searchFilters.checkIn.toLocaleString(\"default\", {\n             day: \"2-digit\",\n           })} \n           - \n           ${searchFilters.checkOut.toLocaleString(\"default\", {\n             month: \"short\",\n           })} \n           ${searchFilters.checkOut.toLocaleString(\"default\", {\n             day: \"2-digit\",\n           })}\n          `}\n          </div>\n          <div className=\"vl\" />\n          <div className=\"filter\">{searchFilters.guests} Guest</div>\n          <div className=\"searchFiltersIcon\">\n            <Icon fill=\"#ffffff\" size={20} svg=\"search\" />\n          </div>\n        </div>\n        <div className=\"lrContainers\">\n          {account &&\n            <User account={account} />\n          }\n          <ConnectButton />\n        </div>\n      </div>\n\n      <hr className=\"line\" />\n      <div className=\"rentalsContent\">\n        <div className=\"rentalsContentL\">\n         300+ stays in {searchFilters.destination}\n          {rentalsList &&\n            rentalsList.map((e, i) => {\n              return (\n                <>\n                  <hr className=\"line2\" />\n                  <div className={highLight === i ? \"rentalDivH \" : \"rentalDiv\"}>\n                    <img className=\"rentalImg\" src={e.attributes.imgUrl} alt=\"\"></img>\n                    <div className=\"rentalInfo\">\n                      <div className=\"rentalTitle\">{e.attributes.name}</div>\n                      <div className=\"rentalDesc\">\n                        {e.attributes.unoDescription}\n                      </div>\n                      <div className=\"rentalDesc\">\n                        {e.attributes.dosDescription}\n                      </div>\n                      <div className=\"bottomButton\">\n                        <Button \n                        onClick={() => {\n                          if(account){\n                          bookRental(\n                            searchFilters.checkIn,\n                            searchFilters.checkOut,\n                            e.attributes.uid_decimal.value.$numberDecimal,\n                            Number(e.attributes.pricePerDay_decimal.value.$numberDecimal)\n                          )}else{\n                            handleNoAccount()\n                          }\n                        }\n                        }\n                        text=\"Stay Here\" />\n                        <div className=\"price\">\n                          <Icon fill=\"#6e29e1\" size={14} svg=\"matic\" />{\" \"}\n                          {e.attributes.pricePerDay} / Day\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </>\n              );\n            })}\n        </div>\n        <div className=\"rentalsContentR\">\n          <RentalsMap locations={coOrdinates} setHighLight={setHighLight} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Rentals;\n"]},"metadata":{},"sourceType":"module"}